const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SettingBackgroundItem-CeYydRS0.js","assets/override-BFaICR1o.js","assets/browser-polyfill-CXcayLWt.js","assets/vendor-KxyM20Hl.js","assets/ui-CLaKVJwO.js","assets/override-Czc00p20.css"])))=>i.map(i=>d[i]);
import{ad as ae,u as A,aD as I,a as L,al as ne,q as le,aE as re,aF as ie,ab as ce,aG as de,ai as ue,aj as pe,ak as ge,ag as me,x as ve,y as ye}from"./override-BFaICR1o.js";import{s as D,z as x,$ as R,u as _,a1 as _e,o as s,c as i,i as M,j as fe,b as t,p as g,G as d,F as S,d as C,h as f,S as ke,U as he,e as P,k as we,at as xe}from"./vendor-KxyM20Hl.js";import{_ as be}from"./PlusBadge-DcXgy5Vx.js";import{_ as Be}from"./ic-profile-3-C1dVKLA0.js";import"./browser-polyfill-CXcayLWt.js";import"./ui-CLaKVJwO.js";import"./star-group-BD8DRG6H.js";const Ie={class:"w-28 flex flex-col items-center justify-center rounded-md bg-secondary-0 py-3 text-primary-900 gap-y-1 mx-1"},Pe={class:"text-start text-secondary-500 text-[10px] font-medium"},Me=["onClick"],$e={class:"grid grid-cols-2 mx-auto gap-0 w-full h-full p-[2px]"},Le=["src"],Se=D({__name:"SettingBackgroundShuffle",props:{wallpapers:{},category:{}},setup(b){const m=x(!1),{mutate:w}=ae(),{isPlusMember:n}=A(),{t:a}=R(),u=b,v=[{title:a("every_1_hour"),iteration:I.ONE_HOUR},{title:a("every_4_hours"),iteration:I.FOUR_HOURS},{title:a("every_12_hours"),iteration:I.TWELVE_HOURS},{title:a("everyday"),iteration:I.ONE_DAY}],$=_(()=>{const o=[...u.wallpapers];return o.length<=4?o:o.splice(0,4)}),B=()=>{if(!n&&u.category.isPlus){L("plusModal",{isOpen:!0});return}m.value=!0},y=o=>{m.value=!1,w({selectedIterationTime:o,lastUpdatedTime:new Date().getTime(),selectedIndex:0,categoryId:u.category.id,selectedBackground:u.wallpapers[0]});const l=u.wallpapers[0],p=l.video?{type:"video",name:l.name??"",image:l}:{type:"image",name:l.name??"",image:l};ne(p)};return(o,l)=>{const p=_e("VDropdown");return s(),i("div",{onClick:B,class:"min-w-[120px] relative justify-center items-center h-[80px] bg-no-repeat bg-cover bg-center rounded-md cursor-pointer"},[M(p,{class:"w-full pointer-events-auto",placement:"top",distance:35,"arrow-padding":1e3,triggers:[],shown:d(m),onApplyHide:l[0]||(l[0]=c=>m.value=!1)},{popper:fe(()=>[t("div",Ie,[t("span",Pe,g(d(a)("background_change_interval"))+":",1),(s(),i(S,null,C(v,c=>t("div",{class:"w-full py-1 block text-center text-primary-900 text-xs font-semibold tracking-tight cursor-pointer hover:bg-secondary-100",key:c.iteration,onClick:j=>y(c.iteration)},[t("span",null,g(c.title),1)],8,Me)),64))])]),_:1},8,["shown"]),l[1]||(l[1]=t("div",{class:"absolute inset-0 rounded-md",style:{"background-color":"rgba(100, 95, 95, 0.45)"}},null,-1)),t("div",$e,[(s(!0),i(S,null,C(d($),c=>(s(),i("div",{key:c.mainImage,class:"w-full h-full"},[t("img",{loading:"lazy",src:c.thumbnail?c.thumbnail:c.mainImage,class:"w-full max-h-[38px] object-cover"},null,8,Le)]))),128))]),l[2]||(l[2]=t("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},[t("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M26 14.577C26 21.2967 20.6327 26.7344 14 26.7344C7.36727 26.7344 3.33088 19.9705 3.33088 19.9705M3.33088 19.9705H8.74181M3.33088 19.9705V26.0491M2 13.8917C2 7.17202 7.32364 1.73436 14 1.73436C22.0073 1.73436 26 8.49827 26 8.49827M26 8.49827V2.41958M26 8.49827H20.6764",stroke:"white","stroke-opacity":"0.6","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])}}}),Ce={class:"bg-secondary-50 rounded-xl h-42 overflow-hidden w-full p-4 flex gap-x-4 justify-between"},De={class:"flex flex-col w-full"},je={class:"flex justify-between w-full"},Oe={class:"text-secondary-800 font-semibold text-lg"},Te={key:0,class:"bg-secondary-100 rounded-2xl flex gap-x-1 px-2.5 py-1 h-fit"},Ve=["src"],Ee={class:"font-semibold text-2xs text-secondary-800"},Ue={class:"flex items-center gap-x-1 h-fit mt-1"},Ae={class:"text-secondary-500 text-xs"},Re={class:"text-secondary-400 text-[10px] mt-5 text-start"},ze=["alt","src"],He=D({__name:"SettingBackgroundSponsoredPreview",props:{wallpaper:{},category:{}},emits:["setBackground"],setup(b,{emit:m}){const w=m;return(n,a)=>{const u=Be;return s(),i("div",Ce,[t("div",De,[t("div",je,[t("div",Oe,g(n.wallpaper.name),1),n.category.title?(s(),i("div",Te,[n.category.icon?(s(),i("img",{key:0,class:"w-auto h-3",src:n.category.icon},null,8,Ve)):f("",!0),t("span",Ee,g(n.category.description),1)])):f("",!0)]),t("div",Ue,[M(u,{class:"text-secondary-500 size-3"}),t("span",Ae,g(n.wallpaper.photographer.name),1)]),t("p",Re,g(n.wallpaper.description),1)]),t("img",{loading:"lazy",class:"w-40 h-36 rounded-xl cursor-pointer",alt:n.wallpaper.description,src:n.wallpaper.thumbnail,onClick:a[0]||(a[0]=()=>w("setBackground",n.wallpaper))},null,8,ze)])}}}),Fe={class:"flex flex-col gap-y-4"},Ne={class:"flex items-center justify-between w-full"},We={class:"flex items-center justify-center gap-x-2"},Ge={class:"text-xl text-secondary-800"},qe={key:0,class:"bg-secondary-100 rounded-2xl flex gap-x-1 px-2.5 py-1"},Ye=["src"],Je={class:"font-semibold text-2xs text-secondary-800"},Ke={class:"text-secondary-400 font-medium text-md"},Qe={key:0},Xe={class:"flex justify-center mb w-full"},rt=D({__name:"SettingBackgroundCategory",props:{category:{},selectedBackground:{}},emits:["update-selected-background"],setup(b,{emit:m}){const{t:w}=R(),{isLoggedIn:n}=le(),a=b,u=m,v=_(()=>a.category.wallpapers),$=_(()=>a.category.id==="personal"),{isPlusMember:B}=A(),y=_(()=>a.category.wallpapers.filter(e=>!!e.photographer)),o=x(-1);y.value&&(o.value=0),y.value.length>1&&setInterval(()=>{o.value=o.value+1<y.value.length?o.value+1:0},5e3);const l=x(!1),p=x(!1),c=x(0),j=_(()=>v.value.length<3||p.value?v.value:v.value.slice(0,3)),z=_(()=>p.value?"grid grid-cols-4 gap-x-3 gap-y-3 w-full mt-2":"grid grid-cols-4 grid-rows-1 gap-x-3 gap-y-3 w-full mt-2"),O=e=>{if(!B.value&&a.category.isPlus){L("plusModal",{isOpen:!0});return}u("update-selected-background",e)},{mutate:H,isPending:F}=re(),{mutate:N,isPending:W}=ie(),{data:G,isPending:Ze}=ce(),{mutateAsync:q,isPending:Y}=de(),J=async(e,r)=>{var k;e.stopPropagation(),q(r.toString()),((k=a.selectedBackground)==null?void 0:k.id)===r&&(await ue()==="light"?pe():ge())},K=(e,r)=>{e.stopPropagation(),H({cmsWallpaperId:r})},Q=(e,r)=>{e.stopPropagation(),N(r)},X=_(()=>{const e=G.value||[];return r=>e.some(k=>k.id===r)}),Z=(e,r)=>{e.stopPropagation(),L("backgroundPreviewModal",{isOpen:!0,extraData:{category:a.category,selectedIndex:c}}),c.value=r},ee=xe(()=>me(()=>import("./SettingBackgroundItem-CeYydRS0.js"),__vite__mapDeps([0,1,2,3,4,5])));return ke(()=>{if(y.value.length>1){const e=setInterval(()=>{document.hidden||(o.value=o.value+1<y.value.length?o.value+1:0)},5e3);he(()=>clearInterval(e))}}),(e,r)=>{var V;const k=be,T=ve,te=ye,se=Se;return s(),i("div",Fe,[t("div",Ne,[t("div",We,[t("h1",Ge,g((V=e.category)==null?void 0:V.title),1),e.category.description?(s(),i("div",qe,[e.category.icon?(s(),i("img",{key:0,class:"w-auto h-3",src:e.category.icon},null,8,Ye)):f("",!0),t("span",Je,g(e.category.description),1)])):f("",!0),!d(B)&&e.category.isPlus?(s(),P(k,{key:1})):f("",!0)]),v.value.length>3?(s(),i("div",{key:0,class:"flex items-center justify-center gap-x-2 cursor-pointer",onClick:r[0]||(r[0]=h=>p.value=!p.value)},[t("span",Ke,g(d(w)("show_all")),1),p.value?(s(),P(te,{key:1,class:"text-secondary-500"})):(s(),P(T,{key:0,class:"text-secondary-500"}))])):f("",!0)]),e.category.isSponsored&&o.value>=0?(s(),i("div",Qe,[M(He,{onSetBackground:O,category:e.category,wallpaper:y.value[o.value]},null,8,["category","wallpaper"])])):f("",!0),t("div",Xe,[t("div",{class:we(z.value)},[M(se,{wallpapers:v.value,category:e.category},null,8,["wallpapers","category"]),(s(!0),i(S,null,C(j.value,(h,oe)=>{var E,U;return s(),P(d(ee),{key:h.id,image:h,index:oe,"is-selected":((E=e.selectedBackground)==null?void 0:E.mainImage)===h.mainImage||!!((U=e.selectedBackground)!=null&&U.video)&&e.selectedBackground.video===h.video,"is-loading":l.value,"is-personal":$.value,"is-logged-in":d(n),"is-liked":X.value(h.id),"is-like-loading":d(F),"is-remove-like-loading":d(W),"is-delete-loading":d(Y),onSetBackground:O,onLike:K,onUnlike:Q,onDelete:J,onPreview:Z,"is-plus":e.category.isPlus??!1},null,8,["image","index","is-selected","is-loading","is-personal","is-logged-in","is-liked","is-like-loading","is-remove-like-loading","is-delete-loading","is-plus"])}),128))],2)])])}}});export{rt as default};
